
***

### **Lab: Encrypting & Decrypting Data Using OpenSSL**

#### **Objective:**
To use the `openssl` command-line tool to encrypt and decrypt a text file using the AES-256 symmetric encryption algorithm.

**Important Security Warning:** The methods in this lab are for educational purposes only. They use a weak key derivation function (relying only on a password) and do not provide message integrity checks (like HMAC). **Do not use this method for securing sensitive data.**

---

### **Part 1: Encryption Process**

*   **Algorithm:** `aes-256-cbc` (AES with 256-bit key in Cipher Block Chaining mode).
*   **Key:** Derived from a user-provided password.

#### **Initial Encryption (Binary Output):**
This command encrypts the file but produces a binary output that is not human-readable and can cause issues with text-based systems.

```bash
# Encrypts letter_to_grandma.txt into a binary file message.enc
openssl aes-256-cbc -in letter_to_grandma.txt -out message.enc
```

#### **Improved Encryption (Base64 Output):**
The `-a` flag is added to Base64 encode the binary ciphertext.

*   **Benefit of Base64:** It converts the binary encrypted data into a text-only (ASCII) format. This makes the encrypted file readable and safe to transport through systems that only handle text, such as email.

```bash
# Encrypts the file and encodes the output with Base64
openssl aes-256-cbc -a -in letter_to_grandma.txt -out message.enc
```

---

### **Part 2: Decryption Process**

To decrypt the file, the command is very similar, but with the addition of the `-d` flag.

*   **`-d` flag:** Specifies the **d**ecrypt operation.
*   **`-a` flag:** This is **required** again because the input file (`message.enc`) is Base64 encoded. OpenSSL must first decode the Base64 text back into binary before it can perform the decryption.

#### **Decryption Command:**

```bash
# Decrypts message.enc into a new file decrypted_letter.txt
openssl aes-256-cbc -a -d -in message.enc -out decrypted_letter.txt
```
*You will be prompted to enter the same password used during the encryption step.*

---

### **Command Summary**

*   **Encrypt (with Base64):**
    ```bash
    openssl aes-256-cbc -a -in <plaintext_file> -out <encrypted_file>
    ```

*   **Decrypt (from Base64):**
    ```bash
    openssl aes-256-cbc -a -d -in <encrypted_file> -out <decrypted_file>
    ```