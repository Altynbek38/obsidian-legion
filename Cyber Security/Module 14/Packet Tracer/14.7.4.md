

***

### **Lab: Configure IPv6 ACLs**

#### **Objective:**
To configure and apply two separate named IPv6 ACLs to filter traffic. The first ACL will block specific web traffic from a source network, and the second will block ICMP traffic to a destination network.

---

### **Part 1: Block HTTP/HTTPS from a Specific Network**

*   **Goal:** Block a Denial-of-Service (DoS) attack by preventing HTTP and HTTPS traffic from the attacking network (`2001:db8:1:11::/64` - PC2's network) from reaching `Server3`.
*   **Router & Placement:** ACL `BLOCK_HTTP` is created on `R1` and applied **inbound** on the interface closest to the source (the interface connected to PC2's LAN).

**1. Create Named IPv6 ACL `BLOCK_HTTP` on R1:**

```bash
R1(config)# ipv6 access-list BLOCK_HTTP
R1(config-ipv6-acl)# deny tcp any host 2001:db8:1:30::30 eq www
R1(config-ipv6-acl)# deny tcp any host 2001:db8:1:30::30 eq 443
R1(config-ipv6-acl)# permit ipv6 any any
```

**2. Apply the ACL to the Interface:**
*(Assuming `GigabitEthernet0/1` is connected to PC2's network)*
```bash
R1(config)# interface GigabitEthernet0/1
R1(config-if)# ipv6 traffic-filter BLOCK_HTTP in
```

**3. Verification:**
*   Web Browser PC1 → Server3 (`2001:db8:1:30::30`): **Succeeds**
*   Web Browser PC2 → Server3 (`2001:db8:1:30::30`): **Fails** (Blocked by ACL)
*   Ping PC2 → Server3 (`2001:db8:1:30::30`): **Succeeds** (ICMP is permitted)

---

### **Part 2: Block All Incoming ICMP**

*   **Goal:** Mitigate a Distributed Denial-of-Service (DDoS) attack by blocking all incoming ICMP (ping) traffic to the server network.
*   **Router & Placement:** ACL `BLOCK_ICMP` is created on `R3` and applied **outbound** on the interface closest to the destination (the interface connected to Server3's LAN).

**1. Create Named IPv6 ACL `BLOCK_ICMP` on R3:**

```bash
R3(config)# ipv6 access-list BLOCK_ICMP
R3(config-ipv6-acl)# deny icmp any any
R3(config-ipv6-acl)# permit ipv6 any any
```

**2. Apply the ACL to the Interface:**
*(Assuming `GigabitEthernet0/1` is connected to Server3's network)*
```bash
R3(config)# interface GigabitEthernet0/1
R3(config-if)# ipv6 traffic-filter BLOCK_ICMP out
```

**3. Verification:**
*   Ping PC1 → Server3 (`2001:db8:1:30::30`): **Fails** (Blocked by ACL)
*   Ping PC2 → Server3 (`2001:db8:1:30::30`): **Fails** (Blocked by ACL)
*   Web Browser PC1 → Server3 (`2001:db8:1:30::30`): **Succeeds** (HTTP/HTTPS is permitted)

---
#### **General Verification Commands**
*   **View IPv6 ACLs and match counts:**
    ```bash
    show ipv6 access-list
    ```
*   **Verify ACL application on an interface:**
    ```bash
    show ipv6 interface <interface_name>
    ```