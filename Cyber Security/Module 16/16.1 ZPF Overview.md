
---

# 16.1.1: Benefits of a Zone-Based Policy Firewall (ZPF)

#### Two Firewall Configuration Models
Cisco IOS offers two distinct models for firewall configuration:

| Model | Description |
| :--- | :--- |
| **Classic Firewall** | The traditional method. Security policies (like `ip inspect` and ACLs) are applied directly **to individual interfaces**. |
| **Zone-Based Policy Firewall (ZPF)** | The modern method. Interfaces are grouped into logical **security zones**, and policies are applied to traffic moving **between these zones**. |

---
#### Core Benefits of ZPF
ZPF was designed to be more structured, scalable, and easier to understand than the classic model.

*   **Default-Deny Posture:** The fundamental rule of ZPF is that traffic between different zones is **blocked by default**. You must explicitly create a policy to permit traffic. Traffic within the *same* zone is permitted by default.
*   **Independent of Classic ACLs:** It replaces the complex web of `ip inspect` commands and ACLs on interfaces with a more logical, policy-based system.
*   **Readable and Scalable Policies:** ZPF uses the **Cisco Common Classification Policy Language (C3PL)**, which is a structured, modular way to define policies. One policy can handle multiple traffic types, making it much cleaner than managing numerous ACLs.
*   **Flexible Grouping:** Both physical (e.g., `GigabitEthernet0/0`) and virtual (e.g., Tunnel, VLAN) interfaces can be grouped into zones.

#### The C3PL Framework
C3PL is the building block of ZPF and uses a three-part structure (often called the Modular QoS CLI or MQC):
1.  **Class-Map:** **Identifies** the "interesting" traffic (e.g., HTTP traffic, traffic from a specific subnet).
2.  **Policy-Map:** Defines the **action** to take on that traffic (e.g., `inspect`, `pass`, `drop`).
3.  **Service-Policy:** **Applies** the policy to a specific zone-pair (e.g., for traffic moving from the `OUTSIDE` zone to the `INSIDE` zone).

---
#### The Golden Rule of Coexistence
*   A router can run **both** Classic Firewall and ZPF configurations at the same time.
*   **BUT, a single interface can only belong to one model.** An interface can either be a member of a zone (ZPF) or have a classic `ip inspect` command applied, but **never both**.


---

# 16.1.2: ZPF Design Process

Designing a Zone-Based Policy Firewall is a structured, four-step process that moves from logical concepts to physical implementation.

#### Step 1: Determine the Zones
*   **Action:** Logically segment the network by grouping interfaces with similar security requirements into **zones**.
*   **Concept:** Each zone represents a distinct security boundary.
*   **Common Examples:**
    *   `INSIDE-ZONE` (for the trusted private LAN)
    *   `OUTSIDE-ZONE` (for the untrusted public internet)
    *   `DMZ-ZONE` (for semi-trusted public-facing servers)

#### Step 2: Establish Policies Between Zones
*   **Action:** Define the rules for traffic that moves **between** the zones you created.
*   **Concept:** Policies are **unidirectional** and are applied to a **zone-pair** (a source zone and a destination zone).
*   **Example:** To control traffic from your internal users to the internet, you would create a policy for the `INSIDE-ZONE -> OUTSIDE-ZONE` pair.
*   **Goal:** Specify exactly what type of sessions (TCP, UDP, ICMP) are allowed to be initiated from the source zone to the destination zone.

#### Step 3: Design the Physical Infrastructure
*   **Action:** Plan the physical network layout based on your logical zone design.
*   **Considerations:**
    *   **Security:** How many devices will separate your most secure and least secure zones?
    *   **Availability:** Do you need redundant firewalls for high availability?

#### Step 4: Identify Subsets and Merge Requirements (Advanced)
*   **Action:** For complex networks, refine the policies for firewall interfaces that may connect to multiple sub-networks or zones.
*   **Concept:** This step involves creating more granular, device-specific policies when a single interface serves multiple purposes.
*   **Note:** This is an advanced design consideration.


