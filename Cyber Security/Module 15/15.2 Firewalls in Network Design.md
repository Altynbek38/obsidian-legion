
---

# 15.2.1: Common Security Architectures

This section outlines three common firewall designs, each offering different levels of security and complexity.

#### 1. Private and Public (The Classic Firewall)
*   **Concept:** The most basic design, creating a simple boundary between a trusted internal network and an untrusted external network.
*   **Interfaces:** Typically uses two interfaces:
    *   `Inside`: Connects to the private, trusted network.
    *   `Outside`: Connects to the public, untrusted network (e.g., the internet).
*   **Core Traffic Rules:**
    *   **Inside -> Outside:** Traffic is permitted and inspected.
    *   **Return Traffic:** Replies to the inside-initiated connections are allowed back in.
    *   **Outside -> Inside (New Connections):** All new, unsolicited connections are blocked.

#### 2. Demilitarized Zone (DMZ)
*   **Concept:** A more advanced design that creates a semi-trusted "buffer" zone to host public-facing servers (like web, email, and DNS servers). This protects the internal network even if a public server is compromised.
*   **Interfaces:** Typically uses three interfaces: `Inside`, `Outside`, and `DMZ`.
*   **Core Traffic Rules:**

| From      | To        | Policy                                                                 |
| :-------- | :-------- | :--------------------------------------------------------------------- |
| **Inside**  | Outside/DMZ | Permitted (Internal users can access the internet and DMZ servers).      |
| **Outside** | DMZ       | Selectively Permitted (Only for specific services like HTTP, DNS, SMTP). |
| **Outside** | Inside    | Blocked (The public cannot initiate connections to the internal network). |
| **DMZ**     | Inside    | **Blocked (CRITICAL RULE:** A compromised DMZ server cannot attack the internal network). |
| **DMZ**     | Outside   | Selectively Permitted (e.g., a DNS server can make queries to the internet). |

#### 3. Zone-Based Policy Firewalls (ZPF)
*   **Concept:** A modern and flexible Cisco IOS firewall model that moves away from the classic "inside/outside" interface commands. Instead, it groups interfaces into logical **zones**.
*   **The Golden Rules of ZPF:**
    *   **Intra-zone traffic (within the same zone):** Permitted by default. Interfaces in the same zone can communicate freely.
    *   **Inter-zone traffic (between different zones):** Denied by default.
*   **Policy Requirement:** To allow any traffic between two different zones, you must create an explicit policy defining what is permitted.
*   **The "Self Zone":**
    *   A special zone that represents the router itself (all of its IP addresses).
    *   Used to control traffic to and from the router, such as management traffic (SSH, SNMP) and routing protocol updates.


---

# 15.2.2: Layered Defense (Defense in Depth)

#### Core Concept
Layered defense, or **Defense in Depth**, is a security strategy that uses multiple, overlapping security controls. Instead of relying on a single firewall, it creates a series of protective layers. If one layer is breached, the next one is in place to stop the attack.

---
#### The Four Layers of Defense
This model illustrates how security should be applied from the outside in.

| Layer                     | Focus / Description                                                        |
| :------------------------ | :------------------------------------------------------------------------- |
| **1. Endpoint Security**    | Secures the end-user devices (PCs, servers, phones) through identity management and policy compliance. |
| **2. Communications Security** | Protects data in transit, providing information assurance (e.g., VPNs, encryption). |
| **3. Perimeter Security**   | Secures the boundaries between different network zones (e.g., using firewalls between the internet, DMZ, and internal network). |
| **4. Network Core Security**| Protects the internal network core by enforcing policies, preventing the spread of malware, and ensuring network survivability. |

---
#### Example: Screened Subnet Configuration
This is a practical example of a layered firewall defense.
*   **Concept:** Uses multiple devices to filter traffic in stages before it reaches the internal network.
*   **Key Component:** A **Bastion Host**, which is a hardened computer (like a proxy or firewall) placed in a DMZ.
*   **Typical Traffic Flow:**
    1.  Traffic enters from the internet and hits an **Edge Router** (basic packet filtering).
    2.  If permitted, it then goes to a more advanced **Firewall/Bastion Host** for deeper inspection.
    3.  If permitted again, it passes through an **Interior Screening Router**.
    4.  Only after passing all checks does it reach the internal destination host.

---
#### What Firewalls DON'T Protect Against
Firewalls are essential but are not a complete security solution. They have limitations:
*   They don't stop **internal attacks** from compromised hosts or malicious insiders.
*   They don't protect against **rogue access points** installed by users.
*   They are **not a substitute for backups** and disaster recovery plans.
*   They cannot compensate for a lack of security awareness among **users and administrators**.

---
#### Firewall Security Policy Best Practices
*   **Position** firewalls at key security boundaries.
*   **Deny All by Default:** Start with a policy that blocks everything and only permit services that are explicitly needed.
*   **Control Physical Access:** A physically compromised firewall is useless.
*   **Monitor Logs:** Regularly review firewall logs for suspicious activity.
*   **Use Change Management:** Have a formal process for approving and documenting firewall rule changes.
*   **Remember their Purpose:** Firewalls primarily protect against technical attacks originating from the **outside**.